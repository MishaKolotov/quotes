@if (loading) {
  <div class="flex items-center justify-center p-20 w-full">
    <div class="relative">
      <div class="animate-spin rounded-full h-20 w-20 border-4 border-indigo-200 border-t-indigo-600"></div>
      <div class="absolute inset-0 flex items-center justify-center">
        <mat-icon class="text-indigo-400 animate-pulse">format_quote</mat-icon>
      </div>
    </div>
  </div>
} @else if (quote) {
  <div
    class="bg-white rounded-3xl shadow-2xl p-12 sm:p-16 lg:p-20 w-full max-w-6xl mx-auto transform transition-all duration-700 hover:shadow-3xl hover:scale-[1.02] border border-gray-100 min-h-[400px] flex flex-col justify-center"
  >
    <div class="mb-10">
      <div class="flex items-start gap-4 mb-6">
        <mat-icon class="text-6xl lg:text-7xl text-indigo-200 -mt-2 flex-shrink-0">format_quote</mat-icon>
        <p class="text-3xl sm:text-4xl lg:text-5xl font-light text-gray-800 leading-relaxed italic flex-1 text-center">
          {{ quote.text }}
        </p>
      </div>
    </div>

    <div class="flex justify-center items-center pt-6 border-t border-gray-100">
      <div class="w-16 lg:w-24 h-1 bg-gradient-to-r from-indigo-400 via-purple-500 to-pink-500 rounded-full mr-4"></div>
      <p class="text-2xl sm:text-3xl lg:text-4xl font-semibold text-gray-700">
        â€” {{ quote.author }}
      </p>
    </div>

    <div class="mt-6 flex flex-col items-center gap-3">
      <span class="text-sm font-semibold text-gray-600 uppercase tracking-wide">
        Rate this quote
      </span>
      <app-rating
        [currentRating]="currentRating"
        [quoteId]="quote.id"
        (ratingChange)="ratingChange.emit($event)"
      ></app-rating>

      <!-- Copy / Share actions directly under rating -->
      <div class="mt-4 flex gap-3 items-center justify-center">
        <app-copy-quote [quote]="quote"></app-copy-quote>
        <app-share-quote [quote]="quote"></app-share-quote>
      </div>
    </div>

    @if (quote.tags && quote.tags.length > 0) {
      <div class="mt-8 flex flex-wrap gap-3 justify-center">
        @for (tag of quote.tags; track tag) {
          <span class="px-5 py-2 bg-gradient-to-r from-indigo-100 via-purple-100 to-pink-100 text-indigo-800 text-sm lg:text-base font-semibold rounded-full border border-indigo-200 shadow-sm hover:shadow-md transition-shadow">
            #{{ tag }}
          </span>
        }
      </div>
    }
  </div>
} @else {
  <div
    class="text-center p-20 text-gray-500 bg-white rounded-3xl shadow-xl border border-gray-100 w-full max-w-6xl mx-auto"
  >
    <mat-icon class="text-8xl mb-6 text-gray-300">format_quote</mat-icon>
    <p class="text-2xl font-medium text-gray-400">No quote available</p>
    <p class="text-sm text-gray-400 mt-2">Please try again later</p>
  </div>
}
